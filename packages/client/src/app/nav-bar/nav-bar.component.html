<nav class="bg-[#C8D92F] w-full p-4 z-50">
  <div class="container mx-auto flex justify-between items-center">
    <div class="text-white text-4xl font-extrabold">
      <a routerLink="/home">YuemD</a>
    </div>

    <div class="flex-1 ml-4 max-w-3xl">
      <div class="relative">
        <input
          type="text"
          placeholder="🔍 Try searching for something. . ."
          class="w-full px-4 py-2 rounded-3xl border-2 border-gray-300 shadow-md focus:outline-none"
          [(ngModel)]="searchTerm"
          (keydown.enter)="search()"
        />
      </div>
    </div>

    <div class="relative ml-4" (click)="toggleDropdown('menu')">
      <button
        class="flex items-center text-white font-extrabold text-3xl focus:outline-none"
      >
        <span>&#9776;</span>
        <svg
          class="h-5 w-5 ml-2 fill-current"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M10 12l-6-6h12z" />
        </svg>
      </button>

      <div
        class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg py-1 z-50"
        *ngIf="dropdownOpen === 'menu'"
      >
        <a
          routerLink="/forgot-password"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
          >Forgot password</a
        >
        <a
          routerLink="/reset-password"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
          >Reset Password</a
        >
        <a
          routerLink="/book-all"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
          >Books</a
        >
        <a
          routerLink="/book-search-filter"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
          >Search</a
        >
        <a
          routerLink="/rental-all"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
          >Book Available for Rental</a
        >
        <a
          routerLink="/rent-book"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
          >Rent</a
        >
        <a
          routerLink="/return-book"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
          >Return</a
        >
      </div>
    </div>

    <div class="relative ml-4" (click)="toggleDropdown('user')">
      <div class="flex items-center">
        <!-- <img
          src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"
          alt="Profile Picture"
          class="h-10 w-10 rounded-full"
        /> -->
        <ng-container *ngIf="user$ | async as user">
          <img
            src="https://theworldtravelguy.com/wp-content/uploads/2020/11/DSCF6202-2_1200.jpg"
            alt="Profile Picture"
            class="h-10 w-10 rounded-full"
          />
        </ng-container>

        <ng-container *ngIf="!(user$ | async)">
          <img
            src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"
            alt="Profile Picture"
            class="h-10 w-10 rounded-full"
          />
        </ng-container>
        <span
          class="ml-2 text-white font-medium text-lg text-xl"
          *ngIf="user$ | async as user; else guest"
        >
          {{ user.name }}
        </span>
        <ng-template #guest>
          <span class="ml-2 text-white font-medium text-lg text-xl">Guest</span>
        </ng-template>
      </div>

      <div
        class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg py-1 z-50"
        *ngIf="dropdownOpen === 'user'"
      >
        <ng-container *ngIf="user$ | async as user">
          <a
            *ngIf="user"
            routerLink="/profile"
            class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
            >Profile</a
          >
          <a
            *ngIf="user"
            routerLink="/assign-role"
            class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
            >Assign Role</a
          >
          <a
            *ngIf="user"
            routerLink="/create-book"
            class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
            >Create Book</a
          >
          <a
            *ngIf="user"
            routerLink="/update-book"
            class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
            >Update Book</a
          >
          <a
            *ngIf="user"
            routerLink="/delete-book"
            class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
            >Delete Book</a
          >
          <a
            *ngIf="user"
            routerLink="/delete-user"
            class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
            >Delete User</a
          >
          <a
            *ngIf="user"
            routerLink="/"
            class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
            >Settings</a
          >
          <a
            (click)="logout()"
            class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
            >Logout</a
          >
        </ng-container>
        <a
          *ngIf="!(user$ | async)"
          routerLink="/login"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
          >Login</a
        >
        <a
          *ngIf="!(user$ | async)"
          routerLink="/register"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-200"
          >Register</a
        >
      </div>
    </div>
  </div>
</nav>
